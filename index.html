<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G-ASR | Jual Beli Emas Profesional</title>
    <style>
        :root {
            --primary-gold: #C5A028;
            --secondary-gold: #E5C560;
            --dark-blue: #0A192F;
            --text-dark: #333333;
            --text-light: #666666;
            --bg-light: #F9FAFB;
            --white: #FFFFFF;
            --border-radius: 8px;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        }

        body {
            background-color: var(--bg-light);
            color: var(--text-dark);
            line-height: 1.6;
            font-size: 16px;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            background: var(--white);
            min-height: 100vh;
            box-shadow: 0 0 20px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
        }

        .section {
            padding: 24px;
            border-bottom: 1px solid #EEEEEE;
        }

        h2 {
            font-size: 1.25rem;
            color: var(--dark-blue);
            margin-bottom: 16px;
            font-weight: 700;
            border-left: 4px solid var(--primary-gold);
            padding-left: 12px;
        }

        /* HEADER */
        header {
            background-color: var(--dark-blue);
            color: var(--white);
            padding: 30px 24px;
            text-align: center;
        }

        .logo {
            font-size: 2.5rem;
            font-weight: 800;
            letter-spacing: 2px;
            color: var(--primary-gold);
            margin-bottom: 8px;
        }

        .tagline {
            font-size: 0.9rem;
            color: #E0E0E0;
            font-weight: 300;
        }

        /* LIVE PRICE */
        .price-card {
            background: linear-gradient(135deg, #FFF9E6 0%, #FFFFFF 100%);
            border: 1px solid var(--secondary-gold);
            border-radius: var(--border-radius);
            padding: 20px;
            text-align: center;
        }

        .live-price {
            font-size: 2rem;
            font-weight: 800;
            color: var(--dark-blue);
            font-family: 'Courier New', monospace;
            margin: 10px 0;
        }

        .update-time { font-size: 0.75rem; color: #888; }

        /* CALCULATOR STYLES */
        .form-group { margin-bottom: 16px; }
        
        label {
            display: block;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--dark-blue);
        }

        input[type="number"], select {
            width: 100%;
            padding: 12px;
            border: 1px solid #DDD;
            border-radius: var(--border-radius);
            font-size: 1rem;
            background: #FAFAFA;
        }

        /* TOGGLE SWITCH FOR CODE */
        .toggle-container {
            display: flex;
            background: #F0F0F0;
            padding: 4px;
            border-radius: var(--border-radius);
            margin-bottom: 16px;
        }

        .toggle-option {
            flex: 1;
            text-align: center;
            padding: 10px;
            cursor: pointer;
            border-radius: 6px;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.3s;
        }

        .toggle-option.active {
            background: var(--dark-blue);
            color: var(--white);
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        /* RESULT BOX */
        .result-box {
            margin-top: 20px;
            background: #E8F5E9;
            border: 1px solid #C8E6C9;
            padding: 15px;
            border-radius: var(--border-radius);
            display: none;
        }

        .result-value {
            font-size: 1.5rem;
            font-weight: 800;
            color: #2E7D32;
            margin: 5px 0;
        }

        /* BUTTONS */
        .btn-calc {
            width: 100%;
            padding: 14px;
            background-color: var(--primary-gold);
            color: var(--dark-blue);
            border: none;
            border-radius: var(--border-radius);
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.3s;
        }
        .btn-calc:hover { background-color: #b39020; }

        .btn-copy {
            background: none; border: 1px solid var(--primary-gold); color: var(--primary-gold);
            padding: 4px 10px; border-radius: 4px; font-size: 0.75rem; cursor: pointer; margin-left: 8px;
        }
        .btn-copy:hover { background: var(--primary-gold); color: var(--white); }

        .btn-whatsapp {
            display: inline-flex; align-items: center; justify-content: center; width: 100%;
            background-color: #25D366; color: var(--white); text-decoration: none; padding: 16px;
            border-radius: 50px; font-weight: 700; font-size: 1.1rem; margin-top: 10px;
        }

        /* LISTS & FAQ */
        ul.gold-list { list-style: none; padding: 0; }
        ul.gold-list li { padding: 8px 0; border-bottom: 1px dashed #EEE; display: flex; align-items: center; }
        ul.gold-list li::before { content: "â€¢"; color: var(--primary-gold); font-weight: bold; margin-right: 10px; font-size: 1.2rem; }

        details { margin-bottom: 10px; border: 1px solid #EEE; border-radius: var(--border-radius); overflow: hidden; }
        summary { padding: 15px; background: #FAFAFA; cursor: pointer; font-weight: 600; display: flex; justify-content: space-between; }
        .faq-content { padding: 15px; background: var(--white); border-top: 1px solid #EEE; font-size: 0.9rem; color: var(--text-light); }

        /* TOAST */
        .toast {
            position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
            background: rgba(0,0,0,0.8); color: white; padding: 10px 20px; border-radius: 20px;
            font-size: 0.8rem; opacity: 0; transition: opacity 0.3s; pointer-events: none; z-index: 1000;
        }
        .toast.show { opacity: 1; }

        /* FOOTER */
        footer { background: var(--dark-blue); color: #888; padding: 30px; text-align: center; font-size: 0.8rem; }

        @media (min-width: 600px) {
            .container { margin: 20px auto; border-radius: 12px; overflow: hidden; }
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <div class="logo">G-ASR</div>
        <div class="tagline">Jual Emas Lebih Aman, Transparan, dan Profesional</div>
    </header>

    <!-- LIVE PRICE -->
    <div class="section">
        <div class="price-card">
            <div style="font-size:0.8rem; text-transform:uppercase; color:#666;">Harga Emas Murni 24K (Pasar Dunia)</div>
            <div class="live-price">
                <span id="price-display">Rp -</span>
                <button class="btn-copy" onclick="copyText('price-display')">Salin</button>
            </div>
            <div class="update-time" id="last-update">Menunggu pembaruan...</div>
        </div>
    </div>

    <!-- CALCULATOR -->
    <div class="section">
        <h2>Kalkulator Estimasi Harga</h2>
        
        <div class="form-group">
            <label>Berat Emas (Gram)</label>
            <input type="number" id="calc-weight" placeholder="Contoh: 5" step="0.01">
        </div>

        <!-- Mode Toggle -->
        <label>Jenis Barang</label>
        <div class="toggle-container">
            <div class="toggle-option active" id="opt-tanpa-kode" onclick="switchMode('tanpa-kode')">Tanpa Kode / Umum</div>
            <div class="toggle-option" id="opt-ada-kode" onclick="switchMode('ada-kode')">Ada Kode / Cap</div>
        </div>

        <!-- Input: Tanpa Kode (Kategori Umum) -->
        <div class="form-group" id="input-category-box">
            <label>Kategori (Estimasi Fisik)</label>
            <select id="calc-category">
                <option value="16">Emas Tua</option>
                <option value="12">Emas Sedang</option>
                <option value="8">Emas Muda </option>
                <option value="6">Emas Campuran / Rusak</option>
            </select>
        </div>

        <!-- Input: Ada Kode (Dropdown Spesifik) -->
        <div class="form-group" id="input-code-box" style="display: none;">
            <label>Kode / Cap pada Emas</label>
            <select id="calc-code-val">
                <option value="24">999 / 24K (Logam Mulia)</option>
                <option value="23">958 / 23K</option>
                <option value="22">916 / 22K (Kendari/Bali/Dubai)</option>
                <option value="21">875 / 21K</option>
                <option value="20">833 / 20K</option>
                <option value="18">750 / 18K (Emas Putih/Kuning Tua)</option>
                <option value="17">700 / 17K (Emas 70)</option>
                <option value="16">700 / 16K (Emas Tua Standar)</option>
                <option value="14">585 / 14K</option>
                <option value="10">420 / 10K</option>
                <option value="9">375 / 9K (Emas Muda)</option>
                <option value="8">333 / 8K</option>
            </select>
        </div>

        <button class="btn-calc" onclick="calculateEstimate()">Hitung Estimasi Penawaran</button>

        <div class="result-box" id="result-box">
            <p style="margin:0; font-weight:600; color:#1b5e20;">Estimasi Harga Beli G-ASR:</p>
            <div class="result-value">
                <span id="result-price">Rp 0</span>
                <button class="btn-copy" onclick="copyText('result-price')">Salin</button>
            </div>
            <p style="font-size:0.8rem; margin-top:5px; color:#555;">
                *Harga otomatis disesuaikan (Potongan standar & Biaya lebur). Harga final ditentukan setelah cek fisik di lokasi.
            </p>
        </div>
    </div>

    <!-- DAFTAR KODE -->
    <div class="section">
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <h2>Daftar Emas Yang Diterima</h2>
            <button class="btn-copy" onclick="copyList('accepted-list')">Salin</button>
        </div>
        <ul class="gold-list" id="accepted-list">
            <li><strong>Kode 999 (24K):</strong> Logam Mulia / Batangan</li>
            <li><strong>Kode 916 (22K):</strong> Emas Kendari, Bali, Dubai</li>
            <li><strong>Kode 750 (18K):</strong> Perhiasan modern, Emas Putih</li>
            <li><strong>Kode 700 (16K-17K):</strong> Emas Tua umum</li>
            <li><strong>Kode 375/420 (8K-9K):</strong> Emas Muda</li>
            <li>Emas tanpa surat / Emas patah / Emas warisan</li>
        </ul>
        <p style="margin-top:15px; font-weight:600; color:var(--dark-blue);">"Apapun kodenya, selama emas asli, kami terima."</p>
    </div>

    <!-- PROSES -->
    <div class="section">
        <h2>Proses Pengecekan</h2>
        <ol style="padding-left:20px; color:var(--text-light); font-size:0.9rem;">
            <li style="margin-bottom:8px;"><strong>Cek Fisik:</strong> Melihat cap/kode pada barang.</li>
            <li style="margin-bottom:8px;"><strong>Uji Gosok/Air:</strong> Memastikan kadar emas sesuai kode.</li>
            <li style="margin-bottom:8px;"><strong>Penimbangan:</strong> Menggunakan timbangan digital presisi.</li>
            <li style="margin-bottom:8px;"><strong>Pembayaran:</strong> Langsung cair (Tunai/Transfer) di tempat.</li>
        </ol>
    </div>

    <!-- ABOUT & FAQ -->
    <div class="section" style="background-color:#F5F7FA;">
        <h2>Mengapa G-ASR?</h2>
        <p>Kami menggunakan acuan harga yang jelas. Jika emas Anda memiliki kode (misal 750 atau 916), kami menghargainya sesuai kadar tersebut, bukan dipukul rata. Transparansi adalah prioritas kami.</p>
    </div>

    <div class="section">
        <h2>FAQ</h2>
        <details>
            <summary>Apa beda Emas Tua & Muda?</summary>
            <div class="faq-content">Di G-ASR, Emas Tua kami kategorikan setara 16K (70%) ke atas. Emas Muda biasanya berkadar 375 atau 420 (di bawah 42%).</div>
        </details>
        <details>
            <summary>Emas saya tidak ada kodenya?</summary>
            <div class="faq-content">Tidak masalah. Kami akan cek manual menggunakan air keras atau batu gosok untuk menentukan masuk kategori mana (Tua/Sedang/Muda).</div>
        </details>
        <details>
            <summary>Apakah terima emas rusak?</summary>
            <div class="faq-content">Ya, emas patah, gepeng, atau putus tetap kami terima sesuai berat dan kadarnya.</div>
        </details>
    </div>

    <!-- CTA -->
    <div class="section" style="text-align:center;">
        <h2 style="border:none; padding:0;">Siap Transaksi?</h2>
        <p>Hubungi kami untuk jadwal pengecekan atau penjemputan.</p>
        <a href="https://wa.me/6285892767032?text=Halo%20G-ASR,%20saya%20ingin%20jual%20emas.%20Mohon%20info%20lebih%20lanjut." target="_blank" class="btn-whatsapp">
            Hubungi via WhatsApp
        </a>
    </div>

    <footer>
        <span style="display:block; font-weight:bold; color:var(--primary-gold); margin-bottom:5px;">G-ASR GOLD TRADING</span>
        Disclaimer: Harga pasar berubah setiap saat. Kalkulator ini adalah alat bantu estimasi.
    </footer>
</div>

<div id="toast" class="toast">Berhasil disalin!</div>

<script>
    /* KONFIGURASI SISTEM */
    const CONFIG = {
        apiEndpoint: "https://api.gold-api.com/price/XAU", // API Publik
        usdIdr: 16250, // Estimasi Kurs (Bisa disesuaikan)
        updateHours: [6, 12, 17],
        basePriceFallback: 1550000 // Fallback harga 24K jika offline
    };

    let currentPrice24K = CONFIG.basePriceFallback;
    let calculationMode = 'tanpa-kode'; // 'tanpa-kode' atau 'ada-kode'

    /* --- 1. HARGA REALTIME --- */
    async function fetchGoldPrice() {
        const display = document.getElementById('price-display');
        const timeEl = document.getElementById('last-update');

        try {
            const response = await fetch(CONFIG.apiEndpoint);
            if (!response.ok) throw new Error("API Error");
            const data = await response.json();
            
            // Konversi XAU/USD ke IDR/Gram
            const priceXau = data.price; 
            const priceGramIdr = (priceXau / 31.1035) * CONFIG.usdIdr;
            
            currentPrice24K = priceGramIdr;

            display.innerText = formatRupiah(currentPrice24K);
            
            const now = new Date();
            timeEl.innerText = `Update: ${now.toLocaleTimeString('id-ID', {hour:'2-digit', minute:'2-digit'})} WIB`;
            
            // Simpan cache
            localStorage.setItem('gasr_price', JSON.stringify({
                price: currentPrice24K,
                timestamp: now.getTime()
            }));

        } catch (e) {
            console.log("Menggunakan data fallback/cache");
            const cached = JSON.parse(localStorage.getItem('gasr_price'));
            if(cached) {
                currentPrice24K = cached.price;
                display.innerText = formatRupiah(currentPrice24K);
                const d = new Date(cached.timestamp);
                timeEl.innerText = `Cache: ${d.toLocaleTimeString('id-ID')} WIB`;
            } else {
                display.innerText = formatRupiah(currentPrice24K);
            }
        }
    }

    /* --- 2. LOGIKA UI (SWITCH MODE) --- */
    function switchMode(mode) {
        calculationMode = mode;
        const btnTanpa = document.getElementById('opt-tanpa-kode');
        const btnAda = document.getElementById('opt-ada-kode');
        const boxCategory = document.getElementById('input-category-box');
        const boxCode = document.getElementById('input-code-box');

        if (mode === 'tanpa-kode') {
            btnTanpa.classList.add('active');
            btnAda.classList.remove('active');
            boxCategory.style.display = 'block';
            boxCode.style.display = 'none';
        } else {
            btnTanpa.classList.remove('active');
            btnAda.classList.add('active');
            boxCategory.style.display = 'none';
            boxCode.style.display = 'block';
        }
    }

    /* --- 3. KALKULATOR (LOGIKA INTI) --- */
    function calculateEstimate() {
        const weight = parseFloat(document.getElementById('calc-weight').value);
        const resultBox = document.getElementById('result-box');
        const resultText = document.getElementById('result-price');

        if (!weight || weight <= 0) {
            alert("Masukkan berat emas yang valid");
            return;
        }

        // 1. Tentukan Harga Dasar Beli (Pasar 24K - 20% Potongan/Margin)
        // Ini adalah base price G-ASR sebelum dikali karat
        const buyingBase = currentPrice24K * 0.80;

        let selectedKarat = 0;

        // 2. Tentukan Karat Berdasarkan Mode
        if (calculationMode === 'tanpa-kode') {
            // Mengambil value dari dropdown kategori (sudah diset: 16, 12, 8, dll)
            selectedKarat = parseFloat(document.getElementById('calc-category').value);
        } else {
            // Mengambil value dari dropdown kode (sudah diset: 24, 22, 18, 17, dll)
            selectedKarat = parseFloat(document.getElementById('calc-code-val').value);
        }

        // 3. Rumus Utama: Harga Dasar Beli x (Karat Pilihan / 24) x Berat
        // Contoh: Emas Tua (16K) -> HargaBeli x (16/24) x Berat
        const totalEstimate = buyingBase * (selectedKarat / 24) * weight;

        resultText.innerText = formatRupiah(totalEstimate);
        resultBox.style.display = 'block';
    }

    /* --- UTILITIES --- */
    function formatRupiah(num) {
        return "Rp " + new Intl.NumberFormat('id-ID').format(Math.floor(num / 1000) * 1000);
    }

    function copyText(id) {
        const txt = document.getElementById(id).innerText;
        navigator.clipboard.writeText(txt).then(() => showToast());
    }

    function copyList(id) {
        const ul = document.getElementById(id);
        let txt = "";
        ul.querySelectorAll('li').forEach(li => txt += "- " + li.innerText + "\n");
        navigator.clipboard.writeText(txt).then(() => showToast());
    }

    function showToast() {
        const t = document.getElementById('toast');
        t.classList.add('show');
        setTimeout(() => t.classList.remove('show'), 3000);
    }

    // Auto Run
    window.onload = function() {
        // Cek update berdasarkan jam (Simple Logic)
        const now = new Date();
        const h = now.getHours();
        // Trigger fetch jika masuk jam kerja atau belum ada data
        fetchGoldPrice();
    };
</script>

</body>
</html>


